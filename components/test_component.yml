$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
name: test_endpoint
version: 1
code: ../

inputs:
  test_data:
    type: uri_file
  endpoint_name:
    type: string
  workspace_region:
    type: string
  api_key:
    type: string

environment: azureml:AzureML-sklearn-1.0-ubuntu20.04-py38-cpu@latest

command: >-
  bash -lc "python -m pip install --no-cache-dir -r components/requirements.txt && python deployment/test_endpoint.py --test_data ${{inputs.test_data}} --endpoint_name ${{inputs.endpoint_name}} --workspace_region ${{inputs.workspace_region}} --api_key ${{inputs.api_key}}"
